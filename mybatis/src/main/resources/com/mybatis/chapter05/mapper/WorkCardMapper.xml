<?xml version="1.0" encoding="UTF-8" ?>
        <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.chapter05.mapper.WorkCardMapper">
  <insert id="simpleInsert" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
    insert into work_card
    (emp_id, real_name, department)
    values
    (#{empId},#{realName},#{department})
  </insert>
  <insert id="insertIfNotExists" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
    insert into work_card
    (emp_id, real_name, department)
    select
    #{empId},#{realName},#{department}
    from work_card
    where not exists(select * from work_card where emp_id = #{empId})
  </insert>
  <insert id="insertOnDuplicateKeyUpdate" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
    insert into work_card
    (emp_id, real_name, department)
    values
    (#{empId},#{realName},#{department})
    on duplicate key update
    real_name = #{realName},department = #{department};
  </insert>
  <select id = "getWorkCardByEmpId" parameterType="int" resultType="workCard">
    select id , emp_id as empId, real_name as realName , department from work_card
    where emp_id = #{empId}
  </select>
</mapper>